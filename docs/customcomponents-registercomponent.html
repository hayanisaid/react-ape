<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Custom Components · React Ape</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;creating-custom-components&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#creating-custom-components&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Creating Custom Components&lt;/h2&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Custom Components · React Ape"/><meta property="og:type" content="website"/><meta property="og:url" content="http://raphamorim.io/react-ape/index.html"/><meta property="og:description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;creating-custom-components&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#creating-custom-components&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Creating Custom Components&lt;/h2&gt;
"/><meta property="og:image" content="http://raphamorim.io/react-ape/img/logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="http://raphamorim.io/react-ape/img/logo.png"/><link rel="shortcut icon" href="/react-ape/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="http://raphamorim.io/react-ape/blog/atom.xml" title="React Ape Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="http://raphamorim.io/react-ape/blog/feed.xml" title="React Ape Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/react-ape/css/main.css"/><script src="/react-ape/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-ape/"><h2 class="headerTitle">React Ape</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/react-ape/docs/getting-started" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/react-ape/docs/contributing-how-to-contribute" target="_self">Contributing</a></li><li class=""><a href="/react-ape/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/raphamorim/react-ape" target="_self">GitHub</a></li><li class=""><a href="https://reactjs.org/" target="_self">React</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Custom Components</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">The Basics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/react-ape/docs/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/react-ape/docs/learning-the-basics">Learning the Basics</a></li><li class="navListItem"><a class="navItem" href="/react-ape/docs/height-and-width">Height and Width</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul class=""><li class="navListItem"><a class="navItem" href="/react-ape/docs/components-and-apis">Components and APIs</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Contributing</h3><ul class=""><li class="navListItem"><a class="navItem" href="/react-ape/docs/contributing-how-to-contribute">How to Contribute</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Custom Components</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/react-ape/docs/customcomponents-registercomponent">Creating and Registering</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Components</h3><ul class=""><li class="navListItem"><a class="navItem" href="/react-ape/docs/components-image">Image</a></li><li class="navListItem"><a class="navItem" href="/react-ape/docs/components-text">Text</a></li><li class="navListItem"><a class="navItem" href="/react-ape/docs/components-view">View</a></li><li class="navListItem"><a class="navItem" href="/react-ape/docs/components-sectionlist">SectionList</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">APIs</h3><ul class=""><li class="navListItem"><a class="navItem" href="/react-ape/docs/apis-dimensions">Dimensions</a></li><li class="navListItem"><a class="navItem" href="/react-ape/docs/apis-platform">Platform</a></li><li class="navListItem"><a class="navItem" href="/react-ape/docs/apis-stylesheet">StyleSheet</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/raphamorim/react-ape/blob/master/docs/customcomponents-registercomponent.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Custom Components</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="creating-custom-components"></a><a href="#creating-custom-components" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating Custom Components</h2>
<p>Custom Components allow developers to not limit themselves only to React Ape primitive components (as <code>Text</code>, <code>Image</code> and etcetera). You can create UI using custom components, however you must leave render pipeline (such as animation updates) to React Ape render process. We strongly recommend to use React state to animate your custom component.</p>
<h2><a class="anchor" aria-hidden="true" id="registercomponent"></a><a href="#registercomponent" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>registerComponent</code></h2>
<p>Registers an app's root component.</p>
<table>
<thead>
<tr><th>NAME</th><th>TYPE</th><th>REQUIRED</th><th>DESCRIPTION</th></tr>
</thead>
<tbody>
<tr><td>appKey</td><td><code>string</code></td><td><code>Yes</code></td><td>Application key.</td></tr>
<tr><td>renderFunction</td><td><code>function</code></td><td><code>Yes</code></td><td>A function that renders using Canvas2dContext.</td></tr>
</tbody>
</table>
</span></div><div class="tabs"><div class="nav-tabs"><div class="nav-link active" id="2-tab" data-group="group_1" data-tab="tabpanel_2">Spinner.jsx</div><div class="nav-link" id="3-tab" data-group="group_1" data-tab="tabpanel_3">App.jsx</div></div><div class="tab-content"><div class="tab-pane active" data-group="group_1" tabindex="-1" id="tabpanel_2"><div><span><pre><code class="hljs css language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Spinner</span> </span>{
  componentDidCatch(error, errorInfo) {
    <span class="hljs-built_in">console</span>.log(error, errorInfo);
  }

  reset(prevProps, parentStyle, canvas) {
    <span class="hljs-keyword">const</span> { ctx } = canvas;
    <span class="hljs-comment">/* 
     If you want to do a smart reset, you can call render method
     using prevProps with parent styles instead of use clearRect.

     parentStyle will return &lt;View/&gt; style properties:
     parentStyle.backgroundColor === white
    */</span>
    ctx.clearRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>, <span class="hljs-number">18</span>);
  }

  render(props, canvas) {
    <span class="hljs-keyword">const</span> { ctx } = canvas;
    <span class="hljs-keyword">const</span> { style = {}, degrees } = props;
    <span class="hljs-keyword">const</span> { color = <span class="hljs-string">'black'</span> } = style;

    <span class="hljs-keyword">const</span> offset = <span class="hljs-number">8</span>;
    ctx.save();
    ctx.translate(offset, offset);
    ctx.rotate(degrees);

    <span class="hljs-comment">// Draw half open circle</span>
    ctx.beginPath();
    ctx.strokeStyle = color;
    ctx.lineWidth = <span class="hljs-number">2</span>;
    ctx.arc(<span class="hljs-number">8</span> - offset, <span class="hljs-number">8</span> - offset, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1.75</span> * <span class="hljs-built_in">Math</span>.PI);
    ctx.stroke();

    <span class="hljs-comment">// Draw arrowhead</span>
    ctx.lineWidth = <span class="hljs-number">2</span>;
    ctx.moveTo(<span class="hljs-number">13</span> - offset, <span class="hljs-number">1</span> - offset);
    ctx.lineTo(<span class="hljs-number">9</span> - offset, <span class="hljs-number">5</span> - offset);
    ctx.lineTo(<span class="hljs-number">13</span> - offset, <span class="hljs-number">5</span> - offset);
    ctx.lineTo(<span class="hljs-number">13</span> - offset, <span class="hljs-number">1</span> - offset);
    ctx.stroke();
    ctx.restore();
  }
}

<span class="hljs-keyword">const</span> spinner = <span class="hljs-keyword">new</span> Spinner();
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> spinner;
</code></pre>
</span></div></div><div class="tab-pane" data-group="group_1" tabindex="-1" id="tabpanel_3"><div><span><pre><code class="hljs css language-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> {render, View, registerComponent} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-ape'</span>;

<span class="hljs-keyword">import</span> Spinner <span class="hljs-keyword">from</span> <span class="hljs-string">'./Spinner'</span>;

<span class="hljs-comment">// Create Custom Components</span>
<span class="hljs-keyword">const</span> custom = {
  <span class="hljs-attr">Spinner</span>: registerComponent(<span class="hljs-string">'Spinner'</span>, Spinner)
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(props) {
    <span class="hljs-keyword">super</span>(props);
    <span class="hljs-keyword">this</span>.state = { <span class="hljs-attr">degrees</span>: <span class="hljs-number">0.0</span> };
  }

  componentDidMount() {
    setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> { degrees } = <span class="hljs-keyword">this</span>.state;
      <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">degrees</span>: degrees + <span class="hljs-number">0.10</span> });
    }, <span class="hljs-number">10</span>);
  }

  render() {
    <span class="hljs-keyword">const</span> { degrees } = <span class="hljs-keyword">this</span>.state;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">backgroundColor:</span> '<span class="hljs-attr">white</span>' }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">custom.Spinner</span> <span class="hljs-attr">degrees</span>=<span class="hljs-string">{</span> <span class="hljs-attr">degrees</span> } <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> '<span class="hljs-attr">blue</span>' }} /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
    );
  }
}

render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>));
</code></pre>
</span></div></div></div></div><div><span></span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/react-ape/docs/contributing-how-to-contribute"><span class="arrow-prev">← </span><span>How to Contribute</span></a><a class="docs-next button" href="/react-ape/docs/components-image"><span>Image</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#creating-custom-components">Creating Custom Components</a></li><li><a href="#registercomponent"><code>registerComponent</code></a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Docs</h5><a href="/react-ape/docs/en/doc1.html">Getting Started</a><a href="/react-ape/docs/en/doc2.html">Guides</a><a href="/react-ape/docs/en/doc3.html">API Reference</a></div><div><h5>Community</h5><a href="/react-ape/en/users.html">Who is Using React-Ape?</a><a href="https://twitter.com/raphamorims" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/react-ape/blog">Blog</a><a href="https://github.com/raphamorim/react-ape">GitHub</a><a class="github-button" href="https://github.com/raphamorim/react-ape" data-icon="octicon-star" data-count-href="/raphamorim/react-ape/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star React Ape on GitHub</a></div></section><section class="copyright">Copyright © 2022 Raphael Amorim</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'my-api-key',
                indexName: 'my-index-name',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>